<!DOCTYPE html>
<html>
	<head>
		<title>Publish / Subscribe Demo</title>
		<style>
			#clickme1, #clickme2, #clickme3 {display:block;}
		</style>
	</head>
	<body>
		<h1>Publish/Subscribe Pattern Demo</h1>
		<p>This is a demo showing the use of an object I created for implementing the publish/subscribe pattern. The publish/subscribe pattern is also referred to as the observer pattern or custom events. 
		I was inspired by a <a href="http://net.tutsplus.com/tutorials/javascript-ajax/loose-coupling-with-the-pubsub-plugin/" target="_blank">tutorial on NetTuts</a>, where Rebecca Murphey shows a demo of using a pubsub jQuery plugin.
		The plugin she uses in the video was created by Peter Higgins. You can view the plugin source code <a href="https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js" target="_blank">here</a>.
		Instead, I wanted to create a publish/subscribe object that provided the same functionality and wasn't dependent on a library. View the results from clicking each link in the Firebug console.</p>
		<a href="#" id="clickme1">Click me for Topic 1</a>
		<a href="#" id="clickme2">Click me for Topic 2</a>
		<a href="#" id="clickme3">Click me for Topic 3 (which doesn't exist)</a>
	<script src="pubsub.js"></script>
	<script>
	
		/* Example: ***********************************************************************/
		PS.subscribe('/topic1', 'sub1', function() {
			console.log('subscription 1 for topic 1 called');
		});
		
		PS.subscribe('/topic1', 'sub2', function() {
			console.log('subscription 2 for topic 1 called');
		});
		
		PS.subscribe('/topic1', 'sub3', function() {
			console.log('subscription 3 for topic 1 called');
		});
		
		// what happens when you create a subscription w the same name
		///*
		PS.subscribe('/topic1', 'sub3', function() {
			console.log('duplicate for subscription 3 for topic 1 called');
		});
		//*/
		
		//console.log(PS.topicList)
		//PS.unsubscribe('/topic1', 'sub1');
		PS.unsubscribe('/topic1', 'sub2');
		//PS.unsubscribe('/topic1', 'sub3');
		
		document.getElementById('clickme1').onclick = function () {
			PS.publish('/topic1');
		};
		
		
		/* Example: ***********************************************************************/
		//using arguments
		/*		
		PS.subscribe('/topic2', 'sub1_t2', function () {
			console.log('subscription 1 for topic 2 called');
		});
		
		PS.subscribe('/topic2', 'sub2_t2', function () {
			console.log('subscription 2 for topic 2 called');
		});
		
		PS.subscribe('/topic2', 'sub3_t2', function (arg) {
			console.log('subscription 3 for topic 2 called');
			console.log('arguments: '+arg.toString());
		});
		
		document.getElementById('clickme2').onclick = function () {
			PS.unsubscribe('/topic2', 'sub2_t2');
			PS.publish('/topic2', ['arg1', 'arg2', 55, 'arg3']);
		}
		*/
		
		/* Example: ***********************************************************************/
		//what happens when you publish on a topic with no subscriptions
		document.getElementById('clickme3').onclick = function () {
			PS.publish('/topic3');
		}
		
	</script>
	</body>
</html>